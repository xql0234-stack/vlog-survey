import streamlit as st
import pandas as pd
from datetime import datetime

st.set_page_config(page_title="æ—…éŠVlogå•å·", layout="centered")

# -------------------------------------------------------------
# å•å·é–‹é ­èªªæ˜
# -------------------------------------------------------------
st.title("ğŸ¥ æ—…éŠVlog è§€çœ¾å•å·èª¿æŸ¥")

st.markdown("""
æ‚¨å¥½ï¼š  
æ„Ÿè¬æ‚¨æ’¥å†—å¡«å¯«æœ¬å•å·ã€‚æœ¬ç ”ç©¶æ—¨åœ¨æ¢è¨ä¸åŒç”Ÿæ´»å‹æ…‹çš„è§€çœ¾ï¼Œå°æ—…éŠVlogå½±ç‰‡å…§å®¹å½¢å¼åŠYouTuberå€‹äººç‰¹è³ªçš„åå¥½å·®ç•°ã€‚  

æœ¬å•å·æ¡åŒ¿åå¡«ç­”æ–¹å¼ï¼Œæ‰€æœ‰è³‡æ–™åƒ…ä¾›å­¸è¡“ç ”ç©¶ä½¿ç”¨ï¼Œä¸æ¶‰åŠä»»ä½•å•†æ¥­ç”¨é€”ã€‚è«‹æ‚¨ä¾å€‹äººçœŸå¯¦æƒ³æ³•ä½œç­”ï¼Œå…§å®¹ç„¡å°éŒ¯ä¹‹åˆ†ï¼Œæ•¬è«‹æ”¾å¿ƒå¡«å¯«ã€‚  

å¡«ç­”æµç¨‹åŒ…å«ç”Ÿæ´»å‹æ…‹æ¸¬é©—èˆ‡å½±ç‰‡è§€è³ï¼Œç³»çµ±å°‡åˆ†é…å…©æ”¯æ—…éŠVlogå½±ç‰‡ï¼Œè«‹æ‚¨è§€çœ‹å¾Œä¾é¡Œé …ä½œç­”å³å¯ã€‚  

å†æ¬¡æ„Ÿè¬æ‚¨çš„å”åŠ©ï¼
""")

st.divider()

# -------------------------------------------------------------
# åŸºæœ¬è³‡æ–™
# -------------------------------------------------------------
st.header("ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬è³‡æ–™")
gender = st.radio("æ‚¨çš„æ€§åˆ¥ï¼š", ["ç”·", "å¥³", "å…¶ä»–"])
age = st.number_input("æ‚¨çš„å¹´é½¡ï¼š", min_value=10, max_value=100, step=1)
view_freq = st.selectbox("æ‚¨å¹³å‡å¤šä¹…è§€çœ‹ä¸€æ¬¡æ—…éŠVlogï¼Ÿ", ["å¹¾ä¹æ¯å¤©", "æ¯é€±æ•¸æ¬¡", "æ¯æœˆæ•¸æ¬¡", "å¶çˆ¾", "å¹¾ä¹ä¸çœ‹"])

st.divider()

# -------------------------------------------------------------
# ç”Ÿæ´»å‹æ…‹é¡Œé …ï¼ˆæ”¹ç‚º 1ï½7 åˆ† sliderï¼‰
# -------------------------------------------------------------
st.header("ç¬¬äºŒéƒ¨åˆ†ï¼šç”Ÿæ´»å‹æ…‹æ¸¬é©—")

lifestyle_items = {
    "æˆ‘å–œæ­¡å˜—è©¦æ–°å¥‡çš„äº‹ç‰©èˆ‡é«”é©—": 0,
    "æˆ‘å‚¾å‘è¨ˆç•«å¥½è¡Œç¨‹å¾Œå†è¡Œå‹•": 0,
    "æˆ‘æœƒé—œæ³¨ç¤¾ç¾¤ä¸Šæµè¡Œçš„æ—…éŠåœ°é»": 0,
    "æˆ‘åå¥½å®‰éœã€æ”¾é¬†çš„æ—…éŠæ–¹å¼": 0,
    "æˆ‘å¸¸èˆ‡æœ‹å‹åˆ†äº«æ—…éŠç¶“é©—æˆ–å½±ç‰‡": 0,
    "æˆ‘å–œæ­¡åœ¨æ—…é€”ä¸­è¨˜éŒ„ä¸¦ä¸Šå‚³ç…§ç‰‡æˆ–å½±ç‰‡": 0,
    "æ—…éŠå°æˆ‘è€Œè¨€æ˜¯ä¸€ç¨®è‡ªæˆ‘æˆé•·çš„æ©Ÿæœƒ": 0
}

st.write("è«‹ä¾ç…§æ‚¨çš„åŒæ„ç¨‹åº¦ä½œç­”ï¼ˆ1ï¼éå¸¸ä¸åŒæ„ï¼Œ7ï¼éå¸¸åŒæ„ï¼‰")

for item in lifestyle_items:
    lifestyle_items[item] = st.slider(item, 1, 7, 4, help="1ï¼éå¸¸ä¸åŒæ„ï¼Œ7ï¼éå¸¸åŒæ„")

st.divider()

# -------------------------------------------------------------
# å½±ç‰‡è§€çœ‹èˆ‡è©•åƒ¹ï¼ˆå¯ä¿ç•™åŸé¡Œæˆ–è‡ªè¡Œä¿®æ”¹ï¼‰
# -------------------------------------------------------------
st.header("ç¬¬ä¸‰éƒ¨åˆ†ï¼šå½±ç‰‡è§€è³èˆ‡è©•åƒ¹")

st.markdown("è«‹è§€çœ‹ä»¥ä¸‹æ—…éŠVlogå½±ç‰‡ï¼Œä¸¦æ ¹æ“šå½±ç‰‡å…§å®¹å›ç­”å•é¡Œï¼š")

st.video("https://www.youtube.com/watch?v=dQw4w9WgXcQ")  # ç¯„ä¾‹å½±ç‰‡ï¼Œå¯æ›´æ›é€£çµ

score_content = st.slider("é€™æ”¯å½±ç‰‡çš„å…§å®¹å¸å¼•æˆ‘", 1, 7, 4)
score_youtuber = st.slider("é€™ä½YouTuberçš„é¢¨æ ¼ä»¤æˆ‘å–œæ­¡", 1, 7, 4)
score_inspire = st.slider("é€™æ”¯å½±ç‰‡è®“æˆ‘æƒ³å»æ—…éŠ", 1, 7, 4)

st.divider()

# -------------------------------------------------------------
# æäº¤è³‡æ–™
# -------------------------------------------------------------
if st.button("æäº¤å•å·"):
    data = {
        "æäº¤æ™‚é–“": [datetime.now().strftime("%Y-%m-%d %H:%M:%S")],
        "æ€§åˆ¥": [gender],
        "å¹´é½¡": [age],
        "è§€çœ‹é »ç‡": [view_freq],
    }
    for k, v in lifestyle_items.items():
        data[k] = [v]
    data["å½±ç‰‡å…§å®¹å¸å¼•åŠ›"] = [score_content]
    data["YouTuberé¢¨æ ¼å–œå¥½"] = [score_youtuber]
    data["å½±ç‰‡å¼•ç™¼æ—…éŠæ„é¡˜"] = [score_inspire]

    df = pd.DataFrame(data)
    df.to_csv("responses.csv", mode="a", header=False, index=False, encoding="utf-8-sig")

    st.success("æ„Ÿè¬æ‚¨çš„å¡«ç­”ï¼å·²æˆåŠŸæäº¤å•å·ã€‚")
